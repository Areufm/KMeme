{"version":3,"file":"album.js","sources":["pages/album/album.vue","D:/Software/HBuilder/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWxidW0vYWxidW0udnVl"],"sourcesContent":["<template>\r\n\t<view class=\"album-box\">\r\n \t\t<view class=\"list\">\r\n\t\t\t<up-waterfall v-model=\"flowList\" ref=\"uWaterfallRef\">\r\n\t\t\t\t<template v-slot:left=\"{ leftList }\">\r\n\t\t\t\t\t<view class=\"demo-warter\" v-for=\"(item,index) in leftList\" :key=\"index\">\r\n\t\t\t\t\t\t<up-lazy-load threshold=\"-450\" border-radius=\"10\" :image=\"item.img\" :index=\"index\"></up-lazy-load>\r\n\t\t\t\t\t\t<view class=\"demo-title\">\r\n\t\t\t\t\t\t\t{{ item.title }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"demo-tag\">\r\n\t\t\t\t\t\t\t<view class=\"demo-tag-owner\">\r\n\t\t\t\t\t\t\t\t{{ item.tag[0] }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"demo-tag-text\">\r\n\t\t\t\t\t\t\t\t{{ item.tag[1] }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"isCollected\" v-if=\"item.isCollected\">\r\n\t\t\t\t\t\t\t{{ item.isCollected }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-slot:right=\"{ rightList }\">\r\n\t\t\t\t\t<view class=\"demo-warter\" v-for=\"(item,index) in rightList\" :key=\"index\">\r\n\t\t\t\t\t\t<up-lazy-load threshold=\"-450\" border-radius=\"10\" :image=\"item.img\" :index=\"index\"></up-lazy-load>\r\n\t\t\t\t\t\t<view class=\"demo-title\">\r\n\t\t\t\t\t\t\t{{ item.title }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"demo-tag\">\r\n\t\t\t\t\t\t\t<view class=\"demo-tag-owner\">\r\n\t\t\t\t\t\t\t\t{{ item.tag[0] }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"demo-tag-text\">\r\n\t\t\t\t\t\t\t\t{{ item.tag[1] }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"isCollected\" v-if=\"item.isCollected\">\r\n\t\t\t\t\t\t\t{{ item.isCollected }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t</up-waterfall>\r\n\t\t</view>\r\n\t\t<!-- 置顶按钮 -->\r\n\t\t<view v-if=\"showTopBtn\" @click=\"toTop\" class=\"topClass\">\r\n\t\t\t<up-icon name=\"arrow-upward\" :color=\"topBtnIconColor\" size=\"28\"></up-icon>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { onLoad, onPageScroll } from '@dcloudio/uni-app'\r\nimport { getAlbumImages } from '../../api/api.js' // 替换为你具体的接口\r\n\r\nconst title = ref('相册')\r\nconst flowList = ref([]) // 瀑布流图像列表\r\n\r\n// 滚动是否显示 0不显示 1显示\r\nconst showTopBtn = ref(0)\r\n// 样式配置\r\nconst topBtnIconColor = '#ffffff'\r\n\r\nonLoad((options) => {\r\n\t// 接收页面传参\r\n\tconst albumId = Number(options.id)\r\n\ttitle.value = decodeURIComponent(options.title || '相册')\r\n\r\n\t// 设置页面标题\r\n\tuni.setNavigationBarTitle({ title: title.value })\r\n\r\n    // 请求后端该相册的图像数据\r\n\tgetAlbumImages(albumId)\r\n\t\t.then(res => {\r\n\t\t  // 假设 res.data 是 [{ img, title, tag, isCollected }, ...]\r\n\t\t  flowList.value = res.data || []\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t  uni.showToast({\r\n\t\t\ttitle: '加载图片失败',\r\n\t\t\ticon: 'none'\r\n\t\t  })\r\n    })\r\n})\r\n\r\n// 监听滚动\r\nonPageScroll((e) => {\r\n\tif (e.scrollTop > 600) {\r\n\t\tshowTopBtn.value = 1\r\n\t} else {\r\n\t\tshowTopBtn.value = 0\r\n\t}\r\n})\r\n\r\n// 置顶效果\r\nconst toTop = () => {\r\n\tuni.pageScrollTo({\r\n\t\tscrollTop: 0,\r\n\t\tduration: 300\r\n\t})\r\n}\r\n</script>\r\n\r\n<style>\r\n\tpage {\r\n\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\t}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.album-box {\r\n\t  padding: 20rpx;\r\n\t}\r\n\t.list {\r\n\t\tmargin: 30rpx 0;\r\n\t\t.demo-warter {\r\n\t\t\tmargin: 10rpx 10rpx 10rpx 0;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: 16rpx;\r\n\t\t\tpadding: 16rpx;\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\t\t.demo-title {\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t\tcolor: #303133;\r\n\t\t}\r\n\t\t.demo-tag {\r\n\t\t\tdisplay: flex;\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t\t.demo-tag-owner {\r\n\t\t\t\tborder: 1px solid rgb(252, 163, 129);\r\n\t\t\t\tcolor: #ffaa00;\r\n\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 4rpx 14rpx;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t}\r\n\t\t\t.demo-tag-text {\r\n\t\t\t\tborder: 1px solid #00aaff;\r\n\t\t\t\tcolor: #00aaff;\r\n\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 4rpx 14rpx;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.isCollected{\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 20rpx;\r\n\t\t\tright: 20rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t\tline-height: 32rpx;\r\n\t\t\tbackground-color: #ff0000;\r\n\t\t\ttext-align: center;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tpadding: 4rpx 10rpx;\r\n\t\t}\r\n\t}\r\n\t.topClass {\r\n\t\tposition: fixed;\r\n\t\tbottom: 120rpx;\r\n\t\tright: 30rpx;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.7);\r\n\t\tpadding: 20rpx;\r\n\t\twidth: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackdrop-filter: blur(10px);\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.3);\r\n\t\ttransition: all 0.3s ease;\r\n\t\tz-index: 999;\r\n\t\t\r\n\t\t&:active {\r\n\t\t\ttransform: scale(0.9);\r\n\t\t}\r\n\t}\r\n\r\n</style>\r\n","import MiniProgramPage from 'E:/Projects/Software/KMeme/KMeme/pages/album/album.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","getAlbumImages","onPageScroll"],"mappings":";;;;;;;;;;;;;;;AA8DA,MAAA,kBAAA;;;;AANA,UAAA,QAAAA,cAAA,IAAA,IAAA;AACA,UAAA,WAAAA,cAAA,IAAA,EAAA;AAGA,UAAA,aAAAA,cAAA,IAAA,CAAA;AAIAC,kBAAA,OAAA,CAAA,YAAA;AAEA,aAAA,QAAA,EAAA;AACA,YAAA,QAAA,mBAAA,QAAA,SAAA,IAAA;AAGAC,oBAAAA,MAAA,sBAAA,EAAA,OAAA,MAAA,MAAA,CAAA;AAGAC,cAAAA,eAAA,EACA,KAAA,SAAA;AAEA,iBAAA,QAAA,IAAA,QAAA,CAAA;AAAA,MACA,CAAA,EACA,MAAA,MAAA;AACAD,sBAAAA,MAAA,UAAA;AAAA,UACA,OAAA;AAAA,UACA,MAAA;AAAA,QACA,CAAA;AAAA,MACA,CAAA;AAAA,IACA,CAAA;AAGAE,kBAAA,aAAA,CAAA,MAAA;AACA,UAAA,EAAA,YAAA,KAAA;AACA,mBAAA,QAAA;AAAA,MACA,OAAA;AACA,mBAAA,QAAA;AAAA,MACA;AAAA,IACA,CAAA;AAGA,UAAA,QAAA,MAAA;AACAF,oBAAAA,MAAA,aAAA;AAAA,QACA,WAAA;AAAA,QACA,UAAA;AAAA,MACA,CAAA;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpGA,GAAG,WAAW,eAAe;"}