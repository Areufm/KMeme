{"version":3,"file":"api.js","sources":["api/api.js"],"sourcesContent":["import pageApi from './mockData/pageApi.js'\nimport http from './http.js'\nimport { ref } from 'vue'\n\n// uniapp 提供的跨平台环境变量\nconst isH5 = process.env.UNI_PLATFORM === 'h5'\nconst isMp = process.env.UNI_PLATFORM !== 'h5'\n\nexport const getBanner = () => {\n  if (isH5) {\n    // H5环境走http请求，mockjs会自动拦截\n    return http('/user/getBanner')\n  } else {\n    // 小程序环境，直接返回本地数据，包装成Promise\n    return Promise.resolve(pageApi.getBanner().data)\n  }\n}\n\nexport const getHomeList = () => {\n  if (isH5) {\n    return http('/user/getHomeList')\n  } else {\n    return Promise.resolve(pageApi.getHomeList().data)\n  }\n}\n\r\nexport const getAlbumImages = (albumId) => {\n  if (isH5) {\n    return http({\n      url: '/album/images',\n      method: 'POST',\n      data: { albumId }\n    })\n  } else {\n    return Promise.resolve(pageApi.flowList(albumId))\n  }\n}\n\r\n// // 登录\r\n// export const login = (code) => {\r\n// \treturn http('/login', { code }, 'POST')\r\n// }\r\n\r\n// //获取用户信息\r\n// export const getUserInfo = () => {\r\n// \treturn http('/getUserInfo')\r\n// }\nexport const login = (code) => {\n  if (isH5) {\n    return http({\n      url: '/login',\n      method: 'POST',\n      data: { code }\n    })\n  } else {\n    return Promise.resolve({\n      token: 'mocked_token_123456'\n    })\n  }\n}\r\n\r\nexport const getUserInfo = () => {\n  if (isH5) {\n    return http('/getUserInfo')\n  } else {\n    return Promise.resolve({\n      avatarUrl: '/static/catcats.jpg',\n      nickName: '测试用户'\n    })\n  }\n}\r\n\r\n// 我的收藏\r\nexport const collectList = () => {\r\n\treturn http('/collect/list')\r\n}"],"names":["pageApi"],"mappings":";;;AAQO,MAAM,YAAY,MAAM;AAItB;AAEL,WAAO,QAAQ,QAAQA,qBAAAA,QAAQ,YAAY,IAAI;AAAA,EACjD;AACF;AAEO,MAAM,cAAc,MAAM;AAGxB;AACL,WAAO,QAAQ,QAAQA,qBAAAA,QAAQ,cAAc,IAAI;AAAA,EACnD;AACF;AAEa,MAAA,iBAAiB,CAAC,YAAY;AAOlC;AACL,WAAO,QAAQ,QAAQA,qBAAAA,QAAQ,SAAS,OAAO,CAAC;AAAA,EAClD;AACF;;;;"}